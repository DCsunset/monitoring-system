(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{115:function(e,t,r){"use strict";r.r(t);var a=r(153),s=r(70);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);var o=r(5),i=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);i.options.__file="src/components/LoginDialog.vue",t.default=i.exports},146:function(e,t,r){"use strict";r.r(t);var a=r(152),s=r(74);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);var o=r(5),i=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);i.options.__file="src/components/RegisterDialog.vue",t.default=i.exports},147:function(e,t,r){"use strict";r.r(t);var a=r(151),s=r(76);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);var o=r(5),i=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);i.options.__file="src/components/MessageDialog.vue",t.default=i.exports},148:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{staticClass:"fill-height"},[r("login-dialog",{attrs:{value:e.loginDialog},on:{input:function(t){e.setLoginDialog(t)},success:e.updateUserInfo}}),e._v(" "),r("register-dialog",{attrs:{value:e.registerDialog},on:{input:function(t){e.setRegisterDialog(t)},success:function(t){e.messageDialog=!0}}}),e._v(" "),r("message-dialog",{attrs:{persistent:"",title:"Message",message:"Add user successfully"},model:{value:e.messageDialog,callback:function(t){e.messageDialog=t},expression:"messageDialog"}}),e._v(" "),r("v-toolbar",{attrs:{dark:"",color:e.color}},[r("v-btn",{attrs:{icon:"",title:"Home",to:"/"}},[r("v-icon",[e._v("home")])],1),e._v(" "),r("v-toolbar-title",[e._v("\n\t\t\t"+e._s(e.pageTitle)+"\n\t\t")]),e._v(" "),r("v-spacer"),e._v(" "),e.userInfo?r("v-menu",{attrs:{"offset-y":""}},[r("v-btn",{staticStyle:{"text-transform":"none !important"},attrs:{slot:"activator",flat:""},slot:"activator"},[r("v-icon",{attrs:{medium:"",left:""}},[e._v("account_circle")]),e._v(" "),r("div",{staticClass:"title",staticStyle:{"font-weight":"400"}},[e._v(e._s(e.userInfo))])],1),e._v(" "),r("v-list",e._l(e.userMenu,function(t){return r("v-list-tile",{directives:[{name:"show",rawName:"v-show",value:!t.user||"admin"===e.userInfo,expression:"item.user ? userInfo === 'admin' : true"}],key:t.title,on:{click:t.action}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t\t")])],1)],1)}))],1):r("v-btn",{staticStyle:{"text-transform":"none !important"},attrs:{flat:""},on:{click:function(t){t.stopPropagation(),e.setLoginDialog(!e.loginDialog)}}},[r("v-icon",{attrs:{medium:"",left:""}},[e._v("account_circle")]),e._v(" "),r("div",{staticClass:"title",staticStyle:{"font-weight":"400"}},[e._v("Log in")])],1)],1),e._v(" "),r("v-content",[r("router-view")],1)],1)},s=[];a._withStripped=!0,r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s})},151:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:e.persistent,"max-width":"300px",value:e.value},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.close(t):null}}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.title))]),e._v(" "),r("v-card-text",[e._v(e._s(e.message))]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),e._l(e.buttons,function(t){return r("v-btn",{key:t,attrs:{flat:"",color:"green darken-1"},on:{click:function(r){e.$emit(t.toLowerCase(),!0),e.close()}}},[e._v("\n\t\t\t\t"+e._s(t)+"\n\t\t\t")])})],2)],1)],1)},s=[];a._withStripped=!0,r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s})},152:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{fullscreen:"",persistent:"",transition:"dialog-bottom-transition",value:e.value},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.close(t):null}}},[r("v-card",[r("v-toolbar",[r("v-icon",[e._v("account_circle")]),e._v(" "),r("v-toolbar-title",[e._v("Add User")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:e.close}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-alert",{attrs:{outline:"",color:e.messageColor,value:Boolean(e.message)}},[e._v(e._s(e.message))]),e._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:e.submit},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{ref:"username",attrs:{"validate-on-blur":"",color:e.color,label:"Username",hint:"4 to 20 characters of a-zA-Z0-9_",rules:e.usernameRules,"prepend-icon":"person",autofocus:"",clearable:"",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{attrs:{"validate-on-blur":"",color:e.color,type:"password",label:"Password",hint:"4 to 20 characters of 0x21-0x7E in ASCII",rules:e.passwordRules,"prepend-icon":"vpn_key",clearable:"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-text-field",{attrs:{"validate-on-blur":"",color:e.color,type:"password",label:"Repeat Password",rules:e.repasswordRules,"prepend-icon":"vpn_key",clearable:"",required:""},model:{value:e.repassword,callback:function(t){e.repassword=t},expression:"repassword"}}),e._v(" "),r("v-btn",{attrs:{dark:"",color:e.color,type:"submit"}},[e._v("\n\t\t\t\t\tAdd\n\t\t\t\t")])],1)],1)],1)],1)},s=[];a._withStripped=!0,r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s})},153:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"500px",value:e.value},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.close(t):null}}},[r("v-card",[r("v-toolbar",[r("v-icon",[e._v("account_circle")]),e._v(" "),r("v-toolbar-title",[e._v("Log in")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{icon:""},on:{click:e.close}},[r("v-icon",[e._v("close")])],1)],1),e._v(" "),r("v-card-text",[r("v-alert",{attrs:{outline:"",color:e.messageColor,value:Boolean(e.message)}},[e._v(e._s(e.message))]),e._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:e.submit},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{ref:"username",attrs:{"validate-on-blur":"",color:e.color,type:"text",label:"Username or Email",rules:e.usernameRules,"prepend-icon":"person",clearable:"",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{attrs:{"validate-on-blur":"",color:e.color,type:"password",label:"Password",rules:e.passwordRules,"prepend-icon":"vpn_key",clearable:"",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-btn",{attrs:{dark:"",color:e.color,type:"submit"}},[e._v("\n\t\t\t\t\tLog in\n\t\t\t\t")])],1)],1)],1)],1)},s=[];a._withStripped=!0,r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s})},21:function(e,t,r){"use strict";r.r(t);var a=r(148),s=r(54);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);var o=r(5),i=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);i.options.__file="src/pages/Main.vue",t.default=i.exports},54:function(e,t,r){"use strict";r.r(t);var a=r(55),s=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,function(){return a[e]})}(n);t.default=s.a},55:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(r(56)),s=r(6),n=u(r(68)),o=u(r(115)),i=u(r(146)),l=u(r(147));function u(e){return e&&e.__esModule?e:{default:e}}t.default={components:{"login-dialog":o.default,"register-dialog":i.default,"message-dialog":l.default},data:function(){var e=this;return{color:"grey darken-4",messageDialog:!1,userMenu:[{user:"admin",icon:"people",title:"Add User",action:function(){return e.setRegisterDialog(!0)}},{icon:"exit_to_app",title:"Logout",action:this.logout}]}},computed:(0,a.default)({},(0,s.mapState)(["pageTitle","userInfo","loginDialog","registerDialog"])),methods:(0,a.default)({},(0,s.mapMutations)(["setUserInfo","setLoginDialog","setRegisterDialog"]),{errorHandle:function(e){this.$router.push({path:"/error",query:{status:e.status,statusText:e.statusText,data:e.data}})},logout:function(){var e=this;n.default.get("/api/logout").then(function(t){e.setUserInfo(null),e.$router.push("/")}).catch(function(t){e.errorHandle(t.response)})},updateUserInfo:function(){var e=this;n.default.get("/api/user").then(function(t){t.data.success?e.setUserInfo(t.data.data):e.setUserInfo(null)}).catch(function(t){e.errorHandle(t.response)})}}),mounted:function(){this.updateUserInfo()}}},70:function(e,t,r){"use strict";r.r(t);var a=r(71),s=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,function(){return a[e]})}(n);t.default=s.a},71:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(87)),s=i(r(88)),n=i(r(68)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(96));function i(e){return e&&e.__esModule?e:{default:e}}t.default={props:{value:{type:Boolean,default:!1},color:{type:String,default:"primary"}},data:function(){return{valid:!0,username:"",password:"",visible:!1,message:"",messageColor:"",usernameRules:[function(e){return o.usernameValidate(e)||o.emailValidate(e)}],passwordRules:[o.passwordValidate]}},watch:{value:function(e){var t=this;e&&requestAnimationFrame(function(){t.$refs.username.focus()})}},methods:{close:function(){this.$refs.username.blur(),this.$emit("input",!1),this.$refs.form.reset()},submit:function(){var e=this;return(0,s.default)(a.default.mark(function t(){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$refs.form.validate()){t.next=6;break}return t.next=4,n.default.post("/api/login",{username:e.username,password:e.password});case 4:t.sent.data.success?(e.$emit("success",!0),e.message="",e.close()):(e.messageColor="error",e.message="Wrong username or password");case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.messageColor="error",e.message=t.t0.response.data;case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()},register:function(){this.$emit("register",!0),this.close()}}}},74:function(e,t,r){"use strict";r.r(t);var a=r(75),s=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,function(){return a[e]})}(n);t.default=s.a},75:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(87)),s=i(r(88)),n=i(r(68)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(96));function i(e){return e&&e.__esModule?e:{default:e}}t.default={props:{value:{type:Boolean,default:!1},color:{type:String,default:"deep-purple lighten-1"}},data:function(){var e=this;return{valid:!0,message:"",messageColor:"error",username:"",password:"",repassword:"",usernameRules:[o.usernameValidate],passwordRules:[o.passwordValidate],repasswordRules:[function(t){return e.repassword===e.password||"Passwords are not the same"}]}},watch:{value:function(e){var t=this;e&&requestAnimationFrame(function(){t.$refs.username.focus()})}},methods:{close:function(){this.$emit("input",!1),this.$refs.form.reset()},submit:function(){var e=this;return(0,s.default)(a.default.mark(function t(){var r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$refs.form.validate()){t.next=6;break}return t.next=4,n.default.post("/api/register",{username:e.username,password:e.password});case 4:(r=t.sent.data).success?(e.$emit("success",!0),e.message="",e.close()):(e.message=r.data,e.messageColor="error");case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.message=t.t0.response.data,e.messageColor="error";case 12:case"end":return t.stop()}},t,e,[[0,8]])}))()}}}},76:function(e,t,r){"use strict";r.r(t);var a=r(77),s=r.n(a);for(var n in a)"default"!==n&&function(e){r.d(t,e,function(){return a[e]})}(n);t.default=s.a},77:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1},buttons:{type:Array,default:function(){return["ok"]}},title:{type:String,default:""},message:{type:String,default:""}},methods:{close:function(){this.$emit("input",!1)}}}},96:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usernameValidate=function(e){return e?e.length<4?"At least 4 characters":e.length>20?"At most 20 characters":!!/^[A-Za-z0-9_]+$/.test(e)||"Allowed characters: A-Za-z0-9_":"At least 4 characters"},t.passwordValidate=function(e){return e?e.length<4?"At least 4 characters":e.length>20?"At most 20 characters":!!/^[\x21-\x7E]+$/.test(e)||"Allowed characters: 0x21-0x7E in ASCII":"At least 4 characters"},t.emailValidate=function(e){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid Email"},t.IPValidate=function(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||"Invalid IP Address"}}}]);
//# sourceMappingURL=main.101d800c0658cebd17c2.js.map